<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>14 Version control | Using R at Grattan Institute</title>
<meta name="author" content="Matt Cowgill, Will Mackey, and James Ha">
<meta name="description" content="This chapter explores version control and lays out the tools we use for version control.  14.1 Version control is important and intimidating Version control is great! And although it’s initially...">
<meta name="generator" content="bookdown 0.23.1 with bs4_book()">
<meta property="og:title" content="14 Version control | Using R at Grattan Institute">
<meta property="og:type" content="book">
<meta property="og:description" content="This chapter explores version control and lays out the tools we use for version control.  14.1 Version control is important and intimidating Version control is great! And although it’s initially...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="14 Version control | Using R at Grattan Institute">
<meta name="twitter:description" content="This chapter explores version control and lays out the tools we use for version control.  14.1 Version control is important and intimidating Version control is great! And although it’s initially...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Using R at Grattan Institute</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled"><li><a class="" href="index.html"><span class="header-section-number">14</span> Version control</a></li></ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="version-control" class="section level1" number="14">
<h1>
<span class="header-section-number">14</span> Version control<a class="anchor" aria-label="anchor" href="#version-control"><i class="fas fa-link"></i></a>
</h1>
<p>This chapter explores version control and lays out the tools we use for version control.</p>
<div id="version-control-is-important-and-intimidating" class="section level2" number="14.1">
<h2>
<span class="header-section-number">14.1</span> Version control is important and intimidating<a class="anchor" aria-label="anchor" href="#version-control-is-important-and-intimidating"><i class="fas fa-link"></i></a>
</h2>
<p>Version control is great! And although it’s initially quite complicated and stress-inducing, in the long run you’ll find it actually makes so much sense, and wish you’d known about it while you were writing university essays!</p>
<p>Why? Two reasons.</p>
<ol style="list-style-type: decimal">
<li><p>Version control allows us to go back in time.</p></li>
<li><p>Version control allows multiple analysts to work on a project simultaneously, in a way that Excel just doesn’t.</p></li>
</ol>
<div id="step-back-in-time" class="section level3" number="14.1.1">
<h3>
<span class="header-section-number">14.1.1</span> Step back in time<a class="anchor" aria-label="anchor" href="#step-back-in-time"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s talk first about going back in time. Version control means we have multiple snapshots of a project at different stages during development. This means if you get into a big mess in your code one day, you can easily jump back to an earlier point and start again.</p>
<p>And if used properly, version control also stores the project’s journey, allowing you to record why you made the decisions you did. This can be really useful – if you need to edit multiple files at once to make a big change, it’s useful to have a record of when and why you made those changes. This does not diminish the need to have lots of comments in your code, however; those remain vitally important for explaining what the code does.</p>
</div>
<div id="get-outta-my-way" class="section level3" number="14.1.2">
<h3>
<span class="header-section-number">14.1.2</span> Get outta my way<a class="anchor" aria-label="anchor" href="#get-outta-my-way"><i class="fas fa-link"></i></a>
</h3>
<p>As for working together simultaneously, there are two extreme situations we often encounter (and version control bridges the gap).</p>
<p>Situation 1: you’re working on an Excel model, and your teammate needs to make a change. They jump in, make a change, and save the file (despite Dropbox’s warning that someone else is editing the document). Soon after, you save your changes. Boom! Now you have a conflicted copy on the Dropbox.</p>
<p>Situation 2: two of you are working in a Google Sheet. This is so much more collaborative – you can see each other in the document, and see what cell you’re working in. But then your teammate changes a formula in cell B45, which happens to affect the analysis you’re doing in cell A3 on the next sheet. Now you’re not sure if your formula is right or not, because the value you were expecting to see is not appearing. How annoying!</p>
<p>Version control allows you both to work on a document at the same time, but only implement the other person’s changes when you want to. And if your edits conflict with theirs, instead of getting a new conflicted copy document in the Dropbox, your version control software can tell you exactly where the conflict arose so you can quickly decide how to fix it.</p>
<p>Need more convincing? <a href="https://peerj.com/preprints/3159v2/">Jenny Bryan</a> from RStudio eloquently explains why you need version control in your life. Seriously. It’s a great article. It convinced us.</p>
</div>
</div>
<div id="using-github" class="section level2" number="14.2">
<h2>
<span class="header-section-number">14.2</span> Using Github<a class="anchor" aria-label="anchor" href="#using-github"><i class="fas fa-link"></i></a>
</h2>
<p>We use Github to version-control and share reports in LaTeX, so you’re already a bit set-up.</p>
<p>If version control is akin to writing history, Github is the library where that information is archived and where you can go to easily retrieve the information.</p>
<p>Git, on the other hand, is the printing press that makes the books. Or, to try another tortured metaphor, if Github is like iTunes then Git is the software to make MP3s.</p>
<p>To go back into the past and look at old versions of our analysis, we’d normally visit <a href="http://github.com">Github</a> to find our project and its history. Github is also the place where we can raise issues about the code to alert team members, assign team members specific tasks, and deal with code conflicts if/when they arise.</p>
<p>Make sure you have a personal Github account, and then ask a Grattan staff member (e.g. Will or James) to add you to Grattan’s organisation-wide Github account. If you’ve set up a LaTeX document, you’ve probably already completed these steps.</p>
<div id="setting-up-a-github-account-and-github-desktop" class="section level3" number="14.2.1">
<h3>
<span class="header-section-number">14.2.1</span> Setting up a Github account and Github Desktop<a class="anchor" aria-label="anchor" href="#setting-up-a-github-account-and-github-desktop"><i class="fas fa-link"></i></a>
</h3>
<p>To set up a Github account, follow these steps:</p>
<ul>
<li>Go to github.com and click <strong>Sign up</strong>.</li>
<li>Complete the sign up form. You can use your personal (recommended) or Grattan email address.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Personal email addresses are recommended because you &lt;em&gt;may&lt;/em&gt; want to keep your Github account after you have left Grattan. Although that may be wishful thinking from the authors.&lt;/p&gt;"><sup>1</sup></a>
</li>
</ul>
<p>You access Github through your browser. But we need to connect and sync our local files as well. To do this, we use Github Desktop.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is definitely not the only way to do this. You can sync with Github through &lt;/p&gt;"><sup>2</sup></a>
To download and use Github Desktop, follow these steps:</p>
<ul>
<li>Create a Github account.</li>
<li>Go to <a href="desktop.github.com">desktop.github.com</a> and download <strong>Github Desktop</strong>.</li>
<li>From Github Desktop, sign into your account and authorise Github Desktop.</li>
<li>If asked to ‘Configure Git,’ select <strong>Use my Github account name and email address</strong> and click <strong>Finish</strong>.</li>
</ul>
<p>That should do it.</p>
</div>
<div id="getting-started-github" class="section level3" number="14.2.2">
<h3>
<span class="header-section-number">14.2.2</span> Getting started Github<a class="anchor" aria-label="anchor" href="#getting-started-github"><i class="fas fa-link"></i></a>
</h3>
<p>External exercise: a 10 minute introduction to Github: <a href="http://guides.github.com/activities/hello-world" class="uri">http://guides.github.com/activities/hello-world</a></p>
</div>
</div>
<div id="git" class="section level2" number="14.3">
<h2>
<span class="header-section-number">14.3</span> Git<a class="anchor" aria-label="anchor" href="#git"><i class="fas fa-link"></i></a>
</h2>
<p>Git is our preferred version control software. And what’s nice is that you can set up RStudio to allow you use Git seamlessly.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The alternatives to using Git in RStudio are to use Git via the Github Desktop app (speak to Will if you’d rather do this) or directly from the command line. But the point-and-click functionality of RStudio is a much nicer way to get used to version control.&lt;/p&gt;"><sup>3</sup></a></p>
<p>Jenny Bryan from RStudio will walk you through the installation steps in Chapters 4-7 (they’re extremely short chapters):</p>
<p><a href="https://happygitwithr.com/install-intro.html">Click here to access the definitive Git installation guide.</a>
Of course, if you get stuck, ask!</p>
<p>Now that you’re installed, we need to connect RStudio with Github so you can use Git.</p>
<p>The best guide on how to do that is by Simon Brewer (link below). Jenny Bryan’s guide offers similar advice, but I found Simon’s easier to follow.</p>
<p><a href="http://rstudio-pubs-static.s3.amazonaws.com/485236_9e71a253a02748cba293213a8aec5fe8.html">Click here for how to connect RStudio and Github</a></p>
<p>There are some pretty unfriendly pieces of jargon in these steps. The worst is <code>SSH</code>, or “Secure Shell Protocol.” In brief, it’s how you’ll login to Github account from RStudio. Instead of submitting your username and password every time, you’ll have to set up an <code>SSH key pair</code> <strong>one time per device</strong> on which you want to link RStudio and Github. That’s probably just your work computer, and maybe a laptop too if you need.</p>
<p><code>SSH</code> is a more secure way of logging into Github from other applications (in this case, RStudio), and by <a href="https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/">August 2021</a> it will be the <strong>only</strong> method approved by Github.</p>
<p>Again, this set up stuff is confusing, so please ask if you need help! It’s likely to be <em>much</em> faster if you ask a fellow staff member than try to solve an unexpected problem on your own.</p>
</div>
<div id="using-git" class="section level2" number="14.4">
<h2>
<span class="header-section-number">14.4</span> Using Git<a class="anchor" aria-label="anchor" href="#using-git"><i class="fas fa-link"></i></a>
</h2>
<p>Chapter 15 onwards of <a href="https://happygitwithr.com/install-intro.html">Happy Git with R</a> will walk you through some early examples of how to use Git.</p>
<p>Another good option is to prod a Grattan staff member to run a tank-time on version control. If it’s a been a while, and there’s more than one new staff member, then this might be the most efficient way to get associates/fellows engaged in the topic and improve organisation-wide practice.</p>
<p>If you’re using SSH to log into Git, you may run into an unexpected error when trying to clone a project from Github to your machine (this has happened to James twice). The solution is clone the project using the command line, rather than the RStudio interface. You can access the command line directly from RStudio, however. Go to <code>Tools</code> -&gt; <code>Terminal</code> -&gt; <code>New Terminal</code>, and then use the command</p>
<pre><code>git clone git@github.com:grattan/MyRepoNameHere ~/path_to_the_folder_where_i_want_the_project_on_my_machine</code></pre>
<p>Some guiding principles to leave you with:</p>
<ol style="list-style-type: decimal">
<li>Commit early, commit often
<ul>
<li>By committing lots of small changes individually, you’ll have a richer history of the project. It’s a bit like trying to beat a difficult level of a video game. If you mess up but have saved often, you’ll have a more recent place to go back to. But you if save rarely, then you’ll need to go quite a way back to your last savefile.</li>
</ul>
</li>
<li>Pull before pushing
<ul>
<li>After commiting your changes locally, this steps makes sure you’ve got the most up-to-date version of the project on your machine, so you can see where your commits might conflict with changes others have made.</li>
</ul>
</li>
<li>Write meaningful, descriptive commit messages
<ul>
<li>You’ll thank yourself later.</li>
</ul>
</li>
</ol>
</div>
</div>

  <div class="chapter-nav">
<div class="empty"></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Using R at Grattan Institute</strong>" was written by Matt Cowgill, Will Mackey, and James Ha. It was last built on 2021-08-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
